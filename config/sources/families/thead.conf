#
# SPDX-License-Identifier: GPL-2.0
#
# Copyright (c) 2013-2023 Igor Pecovnik, igor@armbian.com
# Copyright (c) 2013-2023 Jacob Hrbek, kreyren@armbian.com
#
# This file is a part of the Armbian Build Framework
# https://github.com/armbian/build/
#

# To apply generic configuration for thead family

# Source includes
. "$SRC/config/sources/families/include/riscv64_common.inc"

ARCH="riscv64"

# Compilers
# NOTE(Krey): Stole that from chainx's repo, context was not provided
[ -n "$KERNEL_COMPILER" ] || KERNEL_COMPILER="riscv64-linux-gnu-"
[ -n "$KERNEL_USE_GCC" ] || KERNEL_USE_GCC="< 8.0"


[ -n "$UBOOT_COMPILER" ] || UBOOT_COMPILER="riscv64-linux-gnu-"
[ -n "$UBOOT_USE_GCC" ] || UBOOT_USE_GCC="< 8.0"


[ -n "$OPENSBI_COMPILER" ] || OPENSBI_COMPILER="riscv64-linux-gnu-"
[ -n "$OPENSBI_USE_GCC" ] || OPENSBI_USE_GCC="< 8.0"

# Family
LINUXFAMILY="thead"

# Power Management
GOVERNOR=performance
## FIXME-QA(Krey): Figure out the values here
## [[ -z $CPUMIN ]] && CPUMIN=480000
## [[ -z $CPUMAX ]] && CPUMAX=1010000

# Tweaks
## family_tweaks() {
##
## }

# FIXME-QA(Krey): Move this in board config
write_uboot_platform() {
	case "$BOARD" in
		"sipeed-licheepi-4a")
			display_alert "Installing u-boot to SD card on '$BOARD' is not implemented, fixme?"

			# On SDCARD
			# dd if="$SRC/cache/sources/u-boot-worktree/u-boot-thead/extlinux/u-boot-with-spl.bin" of=??? bs=??? seek=??? status=progress > ???
			;;
	esac
}
